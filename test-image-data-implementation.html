<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画像データ商品実装テスト</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        .success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        .warning {
            border-left-color: #ffc107;
            background: #fff3cd;
        }
        .error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        .code {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        .product-list {
            display: grid;
            gap: 10px;
            margin: 15px 0;
        }
        .product-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        .product-name {
            font-weight: bold;
            color: #333;
        }
        .product-price {
            color: #007bff;
            font-weight: bold;
        }
        .product-status {
            font-size: 0.9em;
            margin-top: 5px;
        }
        .requires-threshold {
            color: #007bff;
        }
        .unavailable-threshold {
            color: #dc3545;
        }
        .always-available {
            color: #28a745;
        }
    </style>
</head>
<body>
    <h1>🖼️ 画像データ商品実装テスト</h1>
    
    <div class="test-section success">
        <h2>✅ 実装完了項目</h2>
        <ul>
            <li><strong>新しい商品カテゴリー追加</strong>: 「画像データ」カテゴリーを追加</li>
            <li><strong>商品データファイル作成</strong>: image-data-products.ts を作成</li>
            <li><strong>商品統合</strong>: 既存の商品配列にマージ（カレンダー商品と同じ方式）</li>
            <li><strong>ビジネスロジック実装</strong>: 50,000円閾値判定ロジック追加</li>
            <li><strong>UI更新</strong>: 商品カードと カート表示に閾値情報を追加</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>📋 追加された画像データ商品一覧</h2>
        
        <div class="product-list">
            <div class="product-item">
                <div class="product-name">商品購入したすべての写真の画像データ</div>
                <div class="product-price">ダウンロード: ¥3,000 / CD: ¥5,000</div>
                <div class="product-status requires-threshold">
                    📋 データ商品以外で税込50,000円以上購入した場合に注文可能
                </div>
            </div>
            
            <div class="product-item">
                <div class="product-name">商品購入した写真から1カットずつ購入</div>
                <div class="product-price">ダウンロード/CD: ¥5,000</div>
                <div class="product-status unavailable-threshold">
                    🚫 データ商品以外で税込50,000円以上購入した場合は選択不可
                </div>
            </div>
            
            <div class="product-item">
                <div class="product-name">1年後データ作成</div>
                <div class="product-price">ダウンロード: ¥400 / CD: ¥600</div>
                <div class="product-status always-available">
                    ✅ 常に注文可能（制限なし）
                </div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>🔧 実装された機能</h2>
        
        <h3>1. 商品カテゴリー追加</h3>
        <div class="code">
// src/assets/categories.ts に追加
['image-data', {
  id: 'image-data',
  name: '画像データ',
  icon: CloudArrowDownIcon,
  shortName: '画像データ'
}]
        </div>

        <h3>2. 商品データ構造拡張</h3>
        <div class="code">
// src/types.ts に追加
export interface ProductType {
  // ... 既存フィールド
  requiresThreshold?: boolean; // 50k閾値が必要
  unavailableWhenThresholdMet?: boolean; // 50k達成時に選択不可
}
        </div>

        <h3>3. ビジネスロジック実装</h3>
        <div class="code">
// src/stores/cart.ts に追加
- nonDataProductTotal: データ商品以外の合計金額計算
- isThresholdMet: 50,000円閾値達成判定
- canOrderDataProduct: データ商品注文可能性判定
- isProductAvailable: 総合的な商品利用可能性判定
        </div>

        <h3>4. UI表示更新</h3>
        <ul>
            <li><strong>商品カード</strong>: 閾値条件の表示と適切なボタンテキスト</li>
            <li><strong>カート表示</strong>: データ商品以外の合計と閾値達成状況表示</li>
            <li><strong>動的更新</strong>: カート内容変更時の即座な状態更新</li>
        </ul>
    </div>

    <div class="test-section warning">
        <h2>⚠️ テスト推奨項目</h2>
        <ol>
            <li><strong>基本機能テスト</strong>
                <ul>
                    <li>画像データカテゴリーが表示されること</li>
                    <li>6つの画像データ商品が表示されること</li>
                    <li>商品の説明文が正しく表示されること</li>
                </ul>
            </li>
            <li><strong>閾値ロジックテスト</strong>
                <ul>
                    <li>50,000円未満: 全写真データが「条件未達」で追加不可</li>
                    <li>50,000円未満: 1カット選択が追加可能</li>
                    <li>50,000円以上: 全写真データが追加可能</li>
                    <li>50,000円以上: 1カット選択が「選択不可」で追加不可</li>
                    <li>1年後データは常に追加可能</li>
                </ul>
            </li>
            <li><strong>UI表示テスト</strong>
                <ul>
                    <li>カート内でデータ商品以外の合計が正しく表示</li>
                    <li>閾値達成状況が正しく表示</li>
                    <li>商品カードの状態表示が適切</li>
                </ul>
            </li>
        </ol>
    </div>

    <div class="test-section">
        <h2>🎯 使用方法</h2>
        <ol>
            <li>アプリケーションを起動</li>
            <li>サイドバーから「画像データ」カテゴリーを選択</li>
            <li>各商品の状態を確認</li>
            <li>他のカテゴリーから商品を追加して50,000円前後でテスト</li>
            <li>カート表示で閾値情報を確認</li>
        </ol>
    </div>

    <div class="test-section success">
        <h2>🎉 実装完了</h2>
        <p>
            画像データ商品の実装が完了しました。要件に従って：
        </p>
        <ul>
            <li>✅ 新しい商品カテゴリーとして画像データを追加</li>
            <li>✅ 新しい商品配列を作成し、読み込み時にマージ</li>
            <li>✅ データ商品以外で税込50,000円以上購入した場合の判定ロジック追加</li>
            <li>✅ 商品ごとの適切な制限ルール実装</li>
            <li>✅ ユーザーフレンドリーなUI表示</li>
        </ul>
        <p>
            <strong>すべての要件が満たされ、既存機能への影響なく実装されています。</strong>
        </p>
    </div>
</body>
</html>